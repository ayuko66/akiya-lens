# 山麓空き家マップ 仮
市町村や移住希望者向けに空き家の要因を可視化し、利活用施策を提案する。
現況（空き家率2023）× 増勢（2018→2023）× 要因（SHAP）で示す意思決定補助ツール。

> 免責：本プロダクトは助言的ツールです。投資・行政・取引判断を保証するものではありません。

## 目的

*	市区町村の空き家の要因を可視化し、利活用施策の検討を支援する
*	現況（空き家率2023）× 増勢（2018→2023）× 要因（SHAP）の三点で優先順位付けを可能にする
*	一般公開（商用・庁内専用ではない）／オープンデータと再現可能なパイプラインを採用

## 背景

日本の空き家は令和5年時点で全国で約900万戸以上（住宅総数の13%以上）。特に人口減少や高齢化が進む地方で深刻化。
参考：[総務省統計局 令和5年住宅・土地統計調査](https://www.stat.go.jp/data/jyutaku/2023/bunseki.html)

### 背景要因
1.	少子高齢化・人口流出（都市部への移住）
2.	相続後の管理放棄（権利関係が複雑）
3.	住宅価格上昇（リフォーム・解体費用）
4.	利活用の需要不足(交通など生活インフラ、雇用の不足)

 > メモ：
私自身、将来的に山麓移住をして終の棲家を見つけたいと思っており、AI活用による地方地域の活性化と移住希望者の支援を目指しています。
本プロダクトは市区町村の空き家の要因を予測をすることで、利活用推進の手がかりに。
また、移住希望者のIターンにおける不安要素の解消と生産年齢人口の増加促進の一助となるツール。


## 対象地域

山麓移住者希望者をターゲットに人気山岳県（八ヶ岳・北/南アルプス周辺）

  - 長野県
  - 山梨県
  - 岐阜県
  - 富山県(余力があれば)
  - 新潟県(余力があれば)
  - 静岡県(余力があれば)

※将来的に水平展開で対象を拡大

## 実現方法

- **回帰**：LightGBMで(空き家率％)を推定。SHAPによる要因提示。
- **4段階レベル分け**：現況の高さ × 増勢 の2軸で4段階に分類(後述のリスクレベル)
- **UI**:Streamlitで地図＋ツールチップ

### 4段階リスクレベル

- 現在の空き家率と2018年→2023年の空き家増加率からスコア化して地図上にレベル分け表示
  - 現状空き家の占める割合×2018年からの増加率(増加・減少または維持)
    - 現況：P75（第3四分位） を高水準しきい値とする
    - 増勢：Δ = 空き家率2023 − 空き家率2018
    - ラベル
      - 赤(最優先)：   「今も高い × 増えつつある」 
      - オレンジ(注意)：「今は高い × 横ばい/減」
      - 黃(警戒)：     「今は低い × 増えつつある」
      - 緑(低)：      「低い × 横ばい/減」
 
### データ
#### ラベル(目的変数)
- 空き家率(市区町村 2018・2023)
  - e-Stat 統計表: CSV,API(XML,JSON,CSV)
  - [住宅・土地統計調査 / 令和５年住宅・土地統計調査 / 住宅及び世帯に関する基本集計 全国・都道府県・市区町村](https://www.e-stat.go.jp/dbview?sid=0004021634)

#### 特徴量

- コンビニなどの生活インフラ(駅、スーパー、学校、病院)密度
  - OpenStreetMap Overpass API
    - [overpass API](https://overpass-api.de/)
    - [OpenStreetMap Overpass API](https://overpass-turbo.eu/)
    - [日本語 wiki](https://wiki.openstreetmap.org/wiki/JA:Overpass_API)
- 地価公示中央値
  - [国土交通省 国土数値情報](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-L01-v3_1.html)
- 降水量、気温、最深積雪、日照時間、全天日射量の５種類の気象要素
  - [平均メッシュデータ](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-G02-2022.html)
- 人口動態
  - 人口数、転入数、転出数、出生数、死亡数、人口増加率、生産年齢人口割合、老年人口割合、単独世帯比率など
  - [RESAS API](https://opendata.resas-portal.go.jp/docs/api/v1/index.html) ※2025年API終了
  - https://www.e-stat.go.jp/stat-search/files?page=1&stat_infid=000040207587

- 別荘地数、別荘地率 (余力とデータあれば)
- 駅距離メディアン (余力があれば)
  - 各市区町村内に1kmグリッドで点を取り、最寄り駅までの距離の中央値を取る

### モデル
- アルゴリズム
  - LightGBM (回帰)
- 分割
  - Leave-One-Out (LOO法 都道府県単位)またはk-folds法（全市区町村をシャッフルして分割）
- 解釈
  - SHAP（summary/bar）で要因TOP3(地図上ツールチップ)

### 評価
- 回帰
  - MAE（%ポイント, pp） / 決定係数R² / (スピアマンの順位相関係数)
- 二値
  - 現況：県内P75以上
  - 増勢：Δ≥+2.0 (2018-2023増加率)

### オプション(余力があれば)
- 生成AIで空き家の利活用提案
  - SHAP上位要因と符号を生成AIに入れ、テキスト生成

### 将来的な拡張性

- 市区町村 → 小地域（メッシュ）へ粒度ダウン
- 地形情報を特徴量に追加(標高や傾斜)
- 2028予測に対応 (5年ごとの変化率から予測)
- 空き家バンク登録数から政策の効果を検証



### アーキテクチャ

- 開発/実行：Docker（ローカル）
- 学習/再学習：GitHub Actions（手動 or 月1自動）で同じDockerを使って実行
- 公開：Hugging Face Spaces（Docker Spaceで同じDockerfileをそのまま使う）
- アプリ：Streamlit はコンテナ内で起動し、予測CSV/Parquetを読む（学習はCIで実施）

```
┌─────────────┐         push         ┌───────────────┐  pulls image   ┌───────────────┐
│  Local Dev  │ ───────────────────▶ │   GitHub      │ ─────────────▶ │  HF Spaces    │
│ (Docker)    │   docker build/run   │  Actions(CI)  │  artifacts     │ (Docker Space)│
└─────────────┘                      └───────────────┘  predictions   └───────────────┘
```

### 使用方法

#### Docker起動方法

#### ディレクトリ構成

### 使用技術・ツール

- 前処理
  - pandas
  - GeoPandas
  - pyproj(地理情報)

- モデル
  − LightGBM
  - scikit-learn

- 評価
  - MAE（%pt）(目標値： ≤ 2.5)
  - R² (目標値: ≥ 0.40)
  - スピアマンの順位相関 (目標値：≥ 0.60)


- その他
  - Streamlit
  - Hugging Face Spaces
  - Docker

### 最終成果物

- Streamlit ダッシュボード（地図：Folium＋GeoPandas）
- 主要特徴量のSHAP解釈グラフ
- レポート



### 工数感

- データ整形 & EDA 2 週
- モデリング 2 週
- ダッシュボード 2 週
- レポート&改善 2 週


### 類似サービス

- 自治体向け空き家予測
  - [将来住居・不動産流通予測AI　MiraiE.ai（ミラーエ）](https://www.microgeo.biz/jp/service/1165)
- 学術研究
  - [空き家マップ](https://webmap.sakura.ne.jp/wp/commentary/)
- 空き家バンク(LIFULL) ※予測はしないが、自治体と連携して空き家情報を集約
  - [空き家バンク](https://www.homes.co.jp/akiyabank/)

### 空き家予測との差別化ポイント

- オープンソース＆オープンデータ
- 解釈可能な特徴量
