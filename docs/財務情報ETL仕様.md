## 財務情報ETL: 市町村財政比較分析表 → fiscal_features.csv / fiscal_features__wide__delta__{ver}__{year0}_{year1}.csv

### 目的
- 総務省「市町村財政比較分析表」から空き家分析に使える財政指標を年度横断で抽出。
- 主要な健全性指標・歳入構造・歳出構造・債務情報をまとめて `data/processed/fiscal_features.csv` として出力。
- 最新年度とその5年前の財務指標を比較し、変化量・変化率・ログ差分をまとめた横持ちデータ `data/processed/fiscal_features__wide__delta__{version}__{base}_{target}.csv` を生成。
- 人口あたり指標・交付税依存度など、後段の分析で利用する派生指標を一括で整形する。

### 対象ファイル
- 市町村別決算状況_概況_XXXX.csv（例: 2018_...000676025 / 2023_...000999905）
- 市町村別決算概況_歳入内訳_XXXX.csv（例: 2018_...000676026 / 2023_...000999906）
- 市町村別決算概況_目的別歳出内訳_XXXX.csv（例: 2018_...000676027 / 2023_...000999908）
- 市町村別決算状況_性質別歳出内訳_XXXX.csv（例: 2018_...000676028 / 2023_...000999910）
- 市町村別決算状況_地方債現在高等_XXXX.csv（例: 2018_...000676029 / 2023_...000999911）

### 抽出項目
- **概況**
  - 住民基本台帳登載人口
  - 財政力指数
  - 経常収支比率
  - 実質公債費比率
  - 将来負担比率
  - 基準財政需要額 / 基準財政収入額 / 標準財政規模
- **歳入内訳**
  - 地方税
  - 地方交付税
- **目的別歳出**
  - 民生費
  - 教育費
  - 土木費
- **性質別歳出**
  - 人件費
  - 公債費
  - 扶助費
- **地方債**
  - 地方債現在高

### 変換処理
- すべての列は日本語ヘッダのまま保持（Excelでの閲覧互換を意識）。
- 団体コードで 5 年度分（現状 2018 / 2023）を突合し、最新年とその5年前のデータを統合。
- 派生指標の算出:
  - 交付税依存度 ≈ (基準財政需要額 − 基準財政収入額) ÷ 標準財政規模 × 100
  - 人口あたり地方税 = 地方税 ÷ 住民基本台帳登載人口
  - 人口あたり地方債現在高 = 地方債現在高 ÷ 住民基本台帳登載人口
  - 民生費/教育費/土木費 割合 = 各歳出 ÷ 歳出総額
- 経常収支比率・財政力指数は 1〜99 パーセンタイルでウィンズライジングし、ロバスト値として出力。
- 最新年度と5年前の差分データでは以下を算出：
  - 各指標の旧年値 / 新年値 / 欠損フラグ
  - 変化量 = 新年値 − 旧年値
  - 変化率 = 変化量 ÷ 旧年値（旧年値≠0の場合）
  - ログ差分 = log(新年値) − log(旧年値)（両値>0の場合）
- 変化データの出力ファイル名は `fiscal_features__wide__delta__{project.version}__{base}_{target}.csv`（version は `config/etl_project.yaml` から取得）。

### 完了条件
- `data/processed/fiscal_features.csv` が生成され、対象年度の団体コードで統合済。
- 主要列および派生指標（人口あたり、割合、ロバスト値、交付税依存度）が出力されている。
- `data/processed/fiscal_features__wide__delta__{version}__{base}_{target}.csv` が生成され、欠損フラグ・変化量系の指標が揃っている。
- いずれの CSV も UTF-8 BOM 付きで出力。

### 参考
- 総務省「市町村財政比較分析表（H30年度）」
  - https://www.soumu.go.jp/iken/zaisei/h30_shichouson.html
  
  
